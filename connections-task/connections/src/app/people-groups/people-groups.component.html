<div class="wrapper">
  <div class="profile-header">
    <h1>CONNECTIONS</h1>
    <button type="button" class="btn logout" (click)="openProfile()">
      PROFILE
    </button>
  </div>
  <div class="main-container">
    <div class="container groups">
      <div class="button-container">
        <button
          type="button"
          class="btn update"
          [disabled]="disabled"
          (click)="updateGroups()"
        >
          Update
        </button>
        <span *ngIf="cliced">{{ timer | async }}</span>
        <button type="button" class="btn create" (click)="createGroup()">
          Create
        </button>
        <h2 class="title groups">GROUPS</h2>
      </div>
      <ul class="list" *ngIf="groups$ | async as groups">
        <li *ngFor="let group of groups">
          <a routerLink="/group/:{{ group.id }}">
            <img
              class="icon"
              src="./../../assets/group_FILL1_wght400_GRAD0_opsz24.svg"
              alt="group-icon"
            /><span>
              {{ group.name }}
            </span>
          </a>
          <button
            type="button"
            class="btn delete"
            *ngIf="group.myGroup"
            (click)="deleteGroup(group.id)"
          >
            x
          </button>
        </li>
      </ul>
    </div>
    <div class="popap" *ngIf="isShown">
      <form
        [formGroup]="popapForm"
        class="popap-form"
        (ngSubmit)="popapForm.valid && createGroupSubmit()"
      >
        <label for="groupName" class="label"></label>
        <input type="text" formControlName="nameGroup" class="input name" />
        <button type="submit" class="btn submit">submit</button>
      </form>
    </div>
    <div class="container people">
      <div class="button-container">
        <button type="button" class="btn update" (click)="updatePeople()">
          Update
        </button>
        <h2 class="title groups">PEOPLE</h2>
      </div>
      <div *ngIf="companion$ | async as companions">
        <ul class="list" *ngIf="people$ | async as people">
          <li *ngFor="let companion of companions" class="companion">
            <a
              routerLink="/conversation/:{{ conversationId }}"
              (click)="getConversationId(companion.id)"
            >
              <img
                class="icon"
                src="./../../assets/person_FILL1_wght400_GRAD0_opsz24.svg"
                alt=""
              /><span>
                {{ companion.name }}
              </span>
            </a>
          </li>

          <li *ngFor="let user of people" class="people">
            <a
              routerLink="/conversation/:{{ conversationId }}"
              (click)="createConversation(user.id)"
            >
              <img
                class="icon"
                src="./../../assets/person_FILL1_wght400_GRAD0_opsz24.svg"
                alt=""
              /><span>
                {{ user.name }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
